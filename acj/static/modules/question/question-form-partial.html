<form name="questionForm" class="form" ng-submit="questionSubmit()" novalidate>
	
	<fieldset>
		<legend>Question</legend>
		<acj-field-with-feedback form-control="questionForm.questionTitle">
			<label for="questionTitle" class="required-star">Question</label>
			<input class="form-control" id="questionTitle" type="text"
				name="questionTitle" ng-model="question.title" placeholder="short form of the question"
				required auto-focus />
		</acj-field-with-feedback>
		<div>
			<label for="importFile">Attach PDF</label>
			<input type="file" nv-file-select uploader="uploader" id="importFile" ng-disabled="uploader.queue.length || question.uploadedFile"/>
			<div class="row" ng-repeat="item in uploader.queue">
				<div class="col-md-4"><strong>{{item.file.name}}</strong></div>
				<div class="col-md-1">{{item.file.size/1024/1024|number:2}} MB</div>
				<div class="col-md-2">{{item.progress}}% completed</div>
				<div class="col-md-3" ng-show="uploader.isHTML5">					
					<div class="attach-progress">
						<div class="attach-progressBar" ng-style="{'width': item.progress + '%' }"></div>
					</div>
				</div>
				<div class="col-md-1">
					<a class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
						<i class="fa fa-ban"></i> Cancel
					</a>
				</div>
				<div class="col-md-1">
					<a class="btn btn-danger btn-xs" ng-click="item.remove();resetName();" ng-disabled="!item.isUploaded">
						<i class="fa fa-trash-o"></i> Delete
					</a>
			</div>
		</div>
		<br>
		<div ng-if="question.uploadedFile">
			<div class="row">
				<div class="col-md-4">
					<strong>{{question.uploadedFile.alias}}</strong>
				</div>
				<div class="col-md-1">
					<a ng-click="deleteFile(question.uploadedFile.posts_id, question.uploadedFile.id)" class="btn btn-danger btn-xs">
						<i class="fa fa-trash-o"></i> Delete
					</a>
				</div>
			</div>
			<br>
		</div>
		<div class="form-group">
			<label for="questionContent" class="required-star">Additional Information</label>
			<textarea ckeditor rows="8"
				ng-model="question.post.content" class="form-control" id="questionContent">
			</textarea>
		</div>
	</fieldset>
	
	<fieldset>
		<legend>Answers</legend>
		<p class="instructional-text"><strong>Students can answer and edit their answers only during the dates and times you set.</strong> Students do not see a question until the answering period begins. Students do not see other answers until they have evaluated the required number of answer pairs.</p>
		
		<div class="row">
			<div class="col-md-6 form-group">
				<acj-field-with-feedback form-control="questionForm.answerStartDate">
					<label class="required-star">Date Answering Begins</label>
					<input type="text" id="answerStartDate" name="answerStartDate" class="form-control" ng-model="question.answer_start" data-autoclose="1" required min-date="today" bs-datepicker>
				</acj-field-with-feedback>
			</div>
			<div class="col-md-6 form-group">
				<acj-field-with-feedback form-control="questionForm.answerStartTime">	
					<label class="required-star">Time Answering Begins</label>
					<input type="text" id="answerStartTime" name="answerStartTime" class="form-control" ng-model="question.answer_start" data-autoclose="1" required timeType="iso" bs-timepicker>
				</acj-field-with-feedback>
			</div>
		</div>
		<div class="row">
			<div class="col-md-6 form-group">
				<acj-field-with-feedback form-control="questionForm.answerEndDate">
					<label class="required-star">Date Answering Ends</label>
					<input type="text" id=answerEndDate" name="answerEndDate" class="form-control" ng-model="question.answer_end" data-autoclose="1" required min-date="today" bs-datepicker>
				</acj-field-with-feedback>
			</div>
			<div class="col-md-6 form-group">
				<acj-field-with-feedback form-control="questionForm.answerEndTime">
					<label class="required-star">Time Answering Ends</label>
					<input type="text" id="answerEndTime" name="answerEndTime" class="form-control" ng-model="question.answer_end" data-autoclose="1" required timeType="iso" bs-timepicker>
				</acj-field-with-feedback>
			</div>
		</div>
	</fieldset>
	
	<fieldset>
		<legend>Evaluations</legend>
		<div class="instructional-text">
			<p>The <strong>recommended minimum number of evaluations per student is {{recommended_eval}}</strong>. Using this number (or higher) creates a more accurate ranking of the answers. If you set a lower number, the answers will not be ranked as accurately.</p>
			<p><strong>After the answering period has passed, students can evaluate answers.</strong> If you want to set specific dates and times for an evaluation period, click the checkbox below.</p>
		</div>
				
		<div class="form-group">
			<acj-field-with-feedback form-control="questionForm.reqJudge">
				<label class="required-star">Number of evaluations required from each student</label>
				<input type="text" id="reqJudge" name="reqJudge" class="form-control" ng-model="question.num_judgement_req" ng-pattern="/^[1-9]\d*$/" required>
			</acj-field-with-feedback>
		</div>
		
		<hr />
		
		<input id="availableCheck" type="checkbox" ng-model="question.availableCheck">
		<label for="availableCheck">Set when students can evaluate this question</label>
		<br /><br />
		
		<div ng-show="question.availableCheck">
			
			<div class="row">
				<div class="col-md-6 form-group">
					<acj-field-with-feedback form-control="questionForm.judgeStartDate">
						<label class="required-star">Date Evaluations Begin</label>
						<input type="text" id="judgeStartDate" name="judgeStartDate" class="form-control" ng-model="question.judge_start" data-autoclose="1" ng-required="question.availableCheck" min-date="today" bs-datepicker>
					</acj-field-with-feedback>
				</div>
				<div class="col-md-6 form-group">
					<acj-field-with-feedback form-control="questionForm.judgeStartTime">	
						<label class="required-star">Time Evaluations Begin</label>
						<input type="text" id="judgeStartTime" name="judgeStartTime" class="form-control" ng-model="question.judge_start" data-autoclose="1" ng-required="question.availableCheck" timeType="iso" bs-timepicker>
					</acj-field-with-feedback>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6 form-group">
					<acj-field-with-feedback form-control="questionForm.judgeEndDate">
						<label class="required-star">Date Evaluations End</label>
						<input type="text" id="judgeEndDate" name="judgeEndDate" class="form-control" ng-model="question.judge_end" data-autoclose="1" ng-required="question.availableCheck" min-date="today" bs-datepicker>
					</acj-field-with-feedback>
				</div>
				<div class="col-md-6 form-group">
					<acj-field-with-feedback form-control="questionForm.judgeEndTime">
						<label class="required-star">Time Evaluations End</label>
						<input type="text" id="judgeEndTime" name="judgeEndTime" class="form-control" ng-model="question.judge_end" data-autoclose="1" ng-required="question.availableCheck" timeType="iso" bs-timepicker>
					</acj-field-with-feedback>
				</div>
			</div>
			
		</div>
	</fieldset>
	
	<fieldset>
		<legend>Replies</legend>
		<div class="form-group">
			<input id="canReply" type="checkbox" ng-model="question.can_reply">
			<label for="canReply">Allow students to reply to classmates' answers</label>
		</div>
	</fieldset>
	
	<input type="submit" class="btn btn-success btn-lg center-block" value="Save"
		ng-disabled="questionForm.$invalid || submitted || uploader.isUploading" />
	
</form>
