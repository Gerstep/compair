<div>
	<h2>Answer Page</h2>

	<div id="stepTitle">
		<h3 id="stepTitle"><div mathjax-bind="qtitle"></div></h3>
		<img src="http://www.gravatar.com/avatar/{{avatarQ}}?s=32&d=retro" class="avatar">
		<p class="authorHeader"><strong>{{authorQ}}</strong> - {{timeQ}}</p>
		<div class="questionContent" mathjax-bind="question"></div>
	</div>

	<a href="" class="btn btn-success" ng-click="check=!check" id="stepAnswer" ng-show="instructor || !quiz || !answered">
		<span class="glyphicon glyphicon-list-alt"></span > Submit Answer
	</a>
	<button class="btn btn-success disabled" id="stepAnswer" ng-show="!instructor && quiz && answered" title="You already submitted an answer.">
		<span class="glyphicon glyphicon-list-alt"></span > Submit Answer
	</button>
	<a href="#/judgepage/{{qid}}" class="btn btn-default" id="stepJudge" ng-show="(instructor || !quiz || answered) && scripts.length > 1"> 
		<span class="glyphicon glyphicon-pencil"></span > Judge Answers
	</a>
	<button class="btn btn-default disabled" id="stepJudge" ng-show="(instructor || !quiz || answered) && scripts.length <= 1" title="Not enough answers to judge yet!">
		<span class="glyphicon glyphicon-pencil"></span > Judge Answers
	</button>
	<a title="Comments" class="btn btn-default" ng-click="qcomm=!qcomm">
		<span class="glyphicon glyphicon-comment"></span > Show Comments ({{commentQCount}})
	</a> 
	
	<div ng-show="qcomm">
		<div ctype="Question" cinstructor="{{instructor}}" clogin="{{login}}" contentlength="{{contentLength}}" comcount="commentQCount" comment-block></div>
	</div>

	<div ng-show="check" class="marginT15">
		<ng-form name="newAnswer" novalidate>
			<div math-toolbar editor="myanswer" class="mathtoolbar"></div>
			<div hallo-editor name="answer" ng-model="myanswer" id="myanswer" class="entries" ng-mouseup="saveRange($event, contentLength)" ng-keydown="saveRange($event, contentLength)"></div>
			<p class="text-error" ng-show="submitted && !myanswer">
				<span class="label required">Error</span>
				Please submit an answer.
			</p>
			<p ng-show="false" id="myanswerError">
				<span class="required">Limit reached!</span>
			</p>

			<a class="btn btn-info" ng-click="previewText(); showpreview=true;"><span class="glyphicon glyphicon-eye-open"></span > Preview</a>
			<a class="btn btn-primary" ng-click="submit();submitted=true">
				<span class="glyphicon glyphicon-ok"></span > Submit
			</a>
			<div class="preview" ng-show="showpreview" mathjax-bind="preview">
			</div>
		</ng-form>
	</div>
	<div ng-show="instructor || !quiz || answered">
		<h3>Answers</h3>
	
		<div class="btn_spacing">
		<a class="btn btn-default" ng-click="temp=orderProp;orderProp=nextOrder;nextOrder=temp" id="stepOrder">
			<span class="glyphicon glyphicon-sort-by-attributes"></span > By {{nextOrder == 'time' ? nextOrder : 'score'}}
		</a>
		</div>
	
		<ul class="postingsList padding0">
			<li ng-repeat="script in scripts | orderBy:orderProp:true" ng-class="{quiz: quiz, discussion: !quiz}">
				<img src="http://www.gravatar.com/avatar/{{script.avatar}}?s=32&d=retro" class="avatar">
				<p class="authorHeader">Author: <strong>{{script.author}}</strong> - {{script.time}} - Score: {{script.score[0].score}}</p>
				<div class="opbuttons">
					<div class="row">
						<div class="col-md-12 col-xs-12">
							<div class="row">
								<div class="col-md-4 col-xs-5">
									<a class="btn btn-default btn-sm btnWidth" ng-show="instructor || login==script.author" ng-click="switchEdits({{script.id}});newanswer=script.content;showpreviewEdit=false;">
										<span class="glyphicon glyphicon-edit"></span > Edit
									</a>
									<div ng-hide="instructor || login==script.author" class="btnWidth"></div>
								</div>
								<div class="col-md-4 col-md-offset-1 col-xs-4">
									<a class="btn btn-sm btn-danger btnWidth" ng-show="instructor || login==script.author" ng-click="remove(script)">
										<span class="glyphicon glyphicon-trash"></span > Delete
									</a>
									<div ng-hide="instructor || login==script.author" class="btnWidth"></div>
								</div>				
							</div>				
						</div>				
					</div>				
				</div>
	
				<div class="marginTopMobile">
					<div ng-hide="switchEdits() == {{script.id}}" id="script{{script.id}}" mathjax-bind="script.content" class="questionContent"></div>
				</div>
				<div ng-show="switchEdits() == {{script.id}}" class="edit">
					<div math-toolbar editor="editScript{{script.id}}" class="mathtoolbar"></div>
					<div hallo-editor name="editanswers" ng-model="newanswer" id="editScript{{script.id}}" class="edit entries questionContent" ng-mouseup="saveRange($event, contentLength)" ng-keydown="saveRange($event, contentLength)"></div>
					<p ng-show="false" id="editScript{{script.id}}Error">
						<span class="required">Limit reached!</span>
					</p>
				</div>
				
				<a class="btn btn-info marginT5" ng-show="switchEdits() == {{script.id}}" ng-click="previewTextEdit(script);showpreviewEdit=true;"><span class="glyphicon glyphicon-eye-open"></span > Preview</a>
				<a class="btn btn-primary marginT5" ng-show="switchEdits() == {{script.id}}" ng-click="editscript(script, newanswer);">
					<span class="glyphicon glyphicon-ok"></span > Submit
				</a>
				
				<div class="preview" ng-show="switchEdits() == {{script.id}} && showpreviewEdit" mathjax-bind="previewEdit"></div>
				
				<div class="marginT5">
					<a class="btn btn-sm btn-info btnWidth" ng-click="getAcomments(script);scomm=!scomm;">
						<span class="glyphicon glyphicon-comment"></span > Comments ({{script.commentACount}})
					</a>
				</div>
					
				<div ng-show="scomm">
					<div csid="{{script.id}}" ctype="Answer" cinstructor="{{instructor}}" clogin="{{login}}" contentlength="{{contentLength}}" comcount="script.commentACount" comment-block></div>
				</div>
			</li>
		</ul>
	</div>
</div>
