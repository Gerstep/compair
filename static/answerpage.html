<div>
	<h2>Answer Page</h2>

	<div id="stepTitle">
		<h3 id="stepTitle"><div mathjax-bind="qtitle"></div></h3>
		<img src="http://www.gravatar.com/avatar/{{avatarQ}}?s=32&d=retro" class="avatar">
		<p class="authorHeader"><strong>{{authorQ}}</strong> - {{timeQ}}</p>
		<div class="questionContent" mathjax-bind="question"></div>
	</div>

	<a href="" class="btn btn-success" ng-click="check=!check" id="stepAnswer" ng-show="!quiz || !answered">
		<i class="icon-puzzle-piece icon-large"></i> Submit Answer
	</a>
	<a href="#/judgepage/{{qid}}" class="btn btn-inverse" id="stepJudge" ng-show="answered && scripts.length > 1"> 
		<i class="icon-legal icon-large"></i> Judge Answers
	</a>
	<button class="btn btn-inverse disabled" id="stepJudgeDisabled" ng-show="answered && scripts.length <= 1" title="Not enough answers to judge yet!">
		<i class="icon-legal icon-large"></i> Judge Answers
	</button>
	<a title="Comments" class="btn" ng-click="qcomm=!qcomm">
		<i class="icon-comments-alt"></i> Show Comments ({{commentQCount}})
	</a> 
	
	<div ng-show="qcomm">
		<div ctype="Question" cinstructor="{{instructor}}" clogin="{{login}}" comment-block></div>
	</div>

	<div ng-show="check">
		<form name="newAnswer" novalidate>
			<div math-toolbar editor="myanswer" class="mathtoolbar"></div>
			<div hallo-editor name="answer" ng-model="myanswer" id="myanswer" class="entries" ng-mouseup="saveRange()" ng-keyup="saveRange()"></div>
			<p class="text-error" ng-show="submitted && !myanswer">
				<span class="label label-important">Error</span>
				Please submit an answer.
			</p>

			<a class="btn btn-info" ng-click="previewText(); showpreview=true;"><i class="icon-eye-open"></i> Preview</a>
			<a class="btn btn-primary" ng-click="submit();submitted=true">
				<i class="icon-ok"></i> Submit
			</a>
			<div class="preview" ng-show="showpreview" mathjax-bind="preview">
			</div>
		</form>
	</div>
	<div ng-show="!quiz || answered">
		<h3>Answers</h3>
	
		<div class="btn_spacing">
		<a class="btn" ng-click="temp=orderProp;orderProp=nextOrder;nextOrder=temp" id="stepOrder">
			<i class="icon-sort-by-attributes"></i> By {{nextOrder}}
		</a>
		</div>
	
		<ul class="postingsList">
			<li ng-repeat="script in scripts | orderBy:orderProp:true" ng-class="{quiz: quiz, discussion: !quiz}">
				<img src="http://www.gravatar.com/avatar/{{script.avatar}}?s=32&d=retro" class="avatar">
				<p class="authorHeader">Author: <strong>{{script.author}}</strong> - {{script.time}} - Score: {{script.score}}</p>
				<div class="opbuttons">
					<div class="row-fluid">
						<div class="col-md-12">
							<div class="row-fluid">
								<div class="col-md-4">
									<a class="btn btn-small btnWidth" ng-show="instructor || login==script.author" ng-click="switchEdits({{script.id}});newanswer=script.content;showpreviewEdit=false;">
										<i class="icon-edit-sign icon-large"></i> Edit
									</a>
									<div ng-hide="instructor || login==script.author" class="btnWidth"></div>
								</div>
								<div class="col-md-4 col-md-offset-1">
									<a class="btn btn-small btn-danger btnWidth" ng-show="instructor || login==script.author" ng-click="remove(script)">
										<i class="icon-trash icon-large"></i> Delete
									</a>
									<div ng-hide="instructor || login==script.author" class="btnWidth"></div>
								</div>				
							</div>				
						</div>				
					</div>				
				</div>
	
				<div>
					<div ng-hide="switchEdits() == {{script.id}}" id="script{{script.id}}" mathjax-bind="script.content" class="questionContent"></div>
				</div>
				
				<div ng-show="switchEdits() == {{script.id}}" class="edit">
					<div math-toolbar editor="editScript{{script.id}}" class="mathtoolbar"></div>
					<div hallo-editor name="editanswers" ng-model="newanswer" id="editScript{{script.id}}" class="edit entries questionContent" ng-mouseup="saveRange()" ng-keyup="saveRange()"></div>
				</div>
				
				<a class="btn btn-info marginT5" ng-show="switchEdits() == {{script.id}}" ng-click="previewTextEdit(script);showpreviewEdit=true;"><i class="icon-eye-open"></i> Preview</a>
				<a class="btn btn-primary marginT5" ng-show="switchEdits() == {{script.id}}" ng-click="editscript(script, newanswer);switchEdits(-1);">
					<i class="icon-ok"></i> Submit
				</a>
				
				<div class="preview" ng-show="switchEdits() == {{script.id}} && showpreviewEdit" mathjax-bind="previewEdit"></div>
				
				<div class="marginT5">
					<a class="btn btn-small btn-info btnWidth" ng-click="getAcomments(script);scomm=!scomm;">
						<i class="icon-comments-alt icon-large"></i> Comments ({{script.commentACount}})
					</a>
				</div>
					
				<div ng-show="scomm">
					<div csid="{{script.id}}" ctype="Answer" cinstructor="{{instructor}}" clogin="{{login}}" comment-block></div>
				</div>
			</li>
		</ul>
	</div>
</div>
